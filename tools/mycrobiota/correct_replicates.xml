<tool id="mycrobiota-correct-replicates" name="Correct Replicates" version="0.1">
    <description>in a mothur shared file</description>
    <macros>
        <import>macros.xml</import>
    </macros>
    <command detect_errors="aggressive"><![CDATA[
        python '$__tool_directory__/mycrobiota.py'
            --command correct_replicates
            --shared '$shared'
            --replicate_suffix '$replicate_suffix'
    ]]></command>
    <inputs>
        <param argument="--shared" type="data" format="mothur.shared" label="Select shared file"/>
        <param argument="--replicate_suffix" type="text" size="100" value="" label="Prefix used to indicated replicates" help="e.g. _R if files are named [sample]_R1, [sample]_R2 etc"/>
    </inputs>
    <outputs>
        <data name="corrected_out" format="mothur.shared" from_work_dir="shared_dereplicated.tsv" label="${tool.name} on ${on_string}"/>
    </outputs>
    <tests>
        <test>
            <param name="shared" value="shared_mock.tsv" ftype="mothur.shared"/>
            <param name="replicate_suffix" value="_replicate"/>
            <output name="count_out" file="shared_dereplicated.tsv" ftype="mothur.shared"/>
        </test>
    </tests>
    <help><![CDATA[
**What it does**
averages the counts over all replicates of a sample in a mothur shared file
    ]]></help>
    <expand macro="citations"/>
</tool>
