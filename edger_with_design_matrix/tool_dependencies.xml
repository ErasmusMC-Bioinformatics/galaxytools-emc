<?xml version="1.0"?>
<tool_dependency>
	<package name="R" version="3.0.3">
		<repository name="package_r_3_0_3" owner="iuc" prior_installation_required="True" />
	</package>
	
	<package name="biocLite_edgeR_limma" version="latest">
		<install version="1.0"> 
			<actions>
				<action type="set_environment_for_install">
					<repository name="package_r_3_0_3" owner="iuc">
						<package name="R" version="3.0.3" />
					</repository>
					
				</action>
				<action type="make_directory">$INSTALL_DIR</action>
				<action type="shell_command">echo "source('http://bioconductor.org/biocLite.R')" &gt; $INSTALL_DIR/runme.R</action>
				<action type="shell_command">echo "installme=c('edgeR','limma')" &gt;&gt; $INSTALL_DIR/runme.R</action>
				<action type="shell_command">echo "biocLite()" &gt;&gt; $INSTALL_DIR/runme.R</action>
				<action type="shell_command">echo "biocLite(installme)" &gt;&gt; $INSTALL_DIR/runme.R</action>
				<action type="shell_command">echo "install.packages(c('stringr','gplots'),dependencies=T,repos='http://cran.us.r-project.org')" &gt;&gt; $INSTALL_DIR/runme.R</action>
				<action type="shell_command">echo "quit(save='no')" &gt;&gt; $INSTALL_DIR/runme.R</action>
				<action type="shell_command">export PATH=$PATH &amp;&amp; export R_HOME=$R_HOME &amp;&amp; export R_LIBS=$R_LIBS &amp;&amp; R CMD BATCH $INSTALL_DIR/runme.R </action>
			</actions>
		</install>
		<readme>
			Installs the latest bioc packages: edgeR &amp; Limma
	   </readme>
	</package>
	
	<package name="design_matrix_creator" version="1.0.0">
		<install version="1.0">
			<actions>
				<action type="shell_command">mkdir $INSTALL_DIR/bin ; cp $REPOSITORY_INSTALL_DIR/design_matrix_creator $INSTALL_DIR/bin/</action>
				<action type="chmod">
					<file mode="755">$INSTALL_DIR/bin/design_matrix_creator</file>
				</action>
				<action type="set_environment">
					<environment_variable name="PATH" action="prepend_to">$INSTALL_DIR/bin</environment_variable>
					<environment_variable name="PATH" action="prepend_to">$REPOSITORY_INSTALL_DIR</environment_variable>
				</action>
			</actions>
		</install>
	</package>
	
	<package name="edger_dge_table_to_bedgraph" version="1.0.0">
		<install version="1.0">
			<actions>
				<action type="shell_command">mkdir $INSTALL_DIR/bin ; cp $REPOSITORY_INSTALL_DIR/edger_dge_table_to_bedgraph $INSTALL_DIR/bin/</action>
				<action type="chmod">
					<file mode="755">$INSTALL_DIR/bin/edger_dge_table_to_bedgraph</file>
				</action>
				<action type="set_environment">
					<environment_variable name="PATH" action="prepend_to">$INSTALL_DIR/bin</environment_variable>
					<environment_variable name="PATH" action="prepend_to">$REPOSITORY_INSTALL_DIR</environment_variable>
				</action>
			</actions>
		</install>
	</package>
</tool_dependency>